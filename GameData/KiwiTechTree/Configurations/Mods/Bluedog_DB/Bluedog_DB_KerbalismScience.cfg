// Kiwi's Tech Tree Overhaul (Bluedog_DB by CobaltWolf Kerbalism Science Patch - Authored by CessnaSkyhawk)
// Version 1.5
// Created: August 2 2021 for KSP 1.11.2
// Last Updated: August 3 2021
// August 3 2021 General clean up to make it PR ready

//Removing the experiments Kerbalism supports already so they can be replaced with the KTT version for maximum saftey (seems like just leaving it alone causes Kerbalism to miss a couple of the magnetometers...)
!EXPERIMENT_DEFINITION:HAS[#id[bd_camera]]:NEEDS[Bluedog_DB,FeatureScience] {}
!EXPERIMENT_DEFINITION:HAS[#id[bd_magScan]]:NEEDS[Bluedog_DB,FeatureScience] {}
!EXPERIMENT_DEFINITION:HAS[#id[bd_IRspec]]:NEEDS[Bluedog_DB,FeatureScience] {}

@PART[bluedog*]:NEEDS[Bluedog_DB,FeatureScience]
{
	!MODULE[*ModuleScience*],* {}
}

@PART[bluedog_Vanguard_Satellite3|bluedog_Mariner2_Truss|bluedog_MarinerB_Truss|bluedog_Ranger_Block1_Truss|bluedog_OGO_LongBoom_Hoop|bluedog_Gemini_Magnetometer|bluedog_mariner10_magnetometer|bluedog_Helios_Magnetometer|bluedog_foldingMag|bluedog_Transit5_Magnetometer|bluedog_Tranist5_Magnetometer_Equipment|bluedog_Pioneer6_Magnetometer|bluedog_Biosat_Magnetometer|bluedog_IMP_Magnetometer|bluedog_AIMP_Magnetometer]:NEEDS[Bluedog_DB,FeatureScience] // Magnometers
{
	!MODULE[*ModuleScience*],* {}
	
	MODULE
	{
		name = Experiment
		experiment_id = magnetometer
		anim_deploy = deploy
	}
}

@PART[bluedog_PioneerAble_Core|bluedog_Geiger|bluedog_GATV_NuclearPackage|bluedog_Pioneer_1|bluedog_Juno1_Explorer1|bluedog_Explorer_S46]:NEEDS[Bluedog_DB,FeatureScience] // Rad Scan
{
	!MODULE[*ModuleScience*],* {}
	
	MODULE
	{
		name = Experiment
		experiment_id = geigerCounter
	}
}

@PART[bluedog_OGO_LongBoom_Ball|bluedog_Ranger_Block2_GammaRaySpectrometer]:NEEDS[Bluedog_DB,FeatureScience] // Gamma Ray
{
	!MODULE[*ModuleScience*],* {}
	
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_gammaRay
	}
}

@PART[bluedog_Pioneer_4|bluedog_Vanguard_Satellite2]:NEEDS[Bluedog_DB,FeatureScience] // Photometry
{
	!MODULE[*ModuleScience*],* {}
	
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_photometer
	}
}

@PART[bluedog_OSO_Photometer]:NEEDS[Bluedog_DB,FeatureScience] //Photopolarimeter Experiment - strangely, although the name of the part is a Photometer, its "stock" science experiment is photopolarimetry
{
	!MODULE[*ModuleScience*],* {}
	
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_photopolarimeter
	}
}

@PART[bluedog_hydrometer]:NEEDS[Bluedog_DB,FeatureScience] //hydrometer
{
	!MODULE[*ModuleScience*],* {}
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_hydrometer
	}
}

@PART[bluedog_IRspec|bluedog_Explorer_7|bluedog_mariner10_SciencePallet]:NEEDS[Bluedog_DB,FeatureScience] //IR spectrometer
{
	!MODULE[*ModuleScience*],* {}
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_IRspec
		anim_deploy = deploy
	}
}

@PART[bluedog_Transit5_UVSpectrometer|bluedog_mariner10_UVspectrometer|bluedog_Ranger_Block1_LymanAlphaTelescope]:NEEDS[Bluedog_DB,FeatureScience] //UV spectrometer
{
	!MODULE[*ModuleScience*],* {}
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_UVspec
		anim_deploy = deploy
	}
}

@PART[bluedog_OAO_WEP_instrument|bluedog_OAO3_PEP_instrument]:NEEDS[Bluedog_DB,FeatureScience] //UV Telescopes
{
	!MODULE[*ModuleScience*],* {}
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_UVtelescope
		anim_deploy = deploy
	}
}

@PART[bluedog_Explorer_8|bluedog_Ranger_Block1_ElectroAnalyzer_Experiment|bluedog_OGO_ExperimentBoom_1|bluedog_mariner10_SciencePallet]:NEEDS[Bluedog_DB,FeatureScience] //Ionization analysis
{
	!MODULE[*ModuleScience*],* {}
	MODULE
	{
		name = Experiment
		experiment_id = kiwi_ionElec
		anim_deploy = deploy
	}
}


@PART[bluedog_MiniGoo]:NEEDS[Bluedog_DB,FeatureScience] //The Goo...
{
	MODULE
	{
		name = HardDrive
		experiment_id = mysteryGoo
		dataCapacity = 0
		sampleCapacity = 1
	}
}

@PART[bluedog_cameraLowTech|bluedog_LunarOrbiter_Camera|bluedog_cameraMidTech|bluedog_Gemini_LunarRecon_Camera|bluedog_Ranger_Block2_TVCamera|bluedog_Ranger_Block3_TVSystem]:NEEDS[FeatureScience,Bluedog_DB]:FIRST //Replacing the Kerbalism "Take Photographs" with the KTT one
{
	!MODULE[ModuleScienceExperiment],* {}// Get rid of the pre-configured experiments
	MODULE
	{
		name = Configure
		title = Early Camera Experiments
	}
}

@PART[bluedog_cameraHighTech|bluedog_mariner10_camera*]:NEEDS[FeatureScience,Bluedog_DB]:FIRST
{
	!MODULE[ModuleScienceExperiment],* {}// Get rid of the pre-configured experiments
	MODULE
	{
		name = Configure
		title = Digital Camera Experiments
	}
}

@PART[bluedog_OFO_Experiment|bluedog_Biosat_Adapter]:NEEDS[FeatureScience,Bluedog_DB]:FIRST //Making these compatible with the KTT Animal Tests
{
	!MODULE[ModuleScienceExperiment],* {}// Get rid of the pre-configured experiments
	MODULE
	{
		name = Configure
		title = Living Creature Experiments
	}
	
}

//Custom Experiments - commented out for now so it doesn't mess up things
//EXPERIMENT_DEFINITION:NEEDS[FeatureScience,Bluedog_DB]
//{	
//	id = earlyCommTests
//	title = Early Communication Tests
//	baseValue = 50
//	scienceCap = 50
//	dataScale = 1
//	requireAtmosphere = False
//	situationMask = 48
//	biomeMask = 0
//	
//	RESULTS
//	{
//		default = Ping! Ping! Ping! It seems like it would be a lot of fun to bounce between relays!
//		default = You use the satellites to transmit a Khristmas greeting from President Keisenhower
//		default = Mission Control stress-tests the satellite by relaying video from the 1964th Kolympics through it
//	}
//}

//@KERBALISM_EXPERIMENT_VALUES:NEEDS[FeatureScience,Bluedog_DB]
//{
//	BDB
//	{
//		earlyCommTests
//		{
//			ECCost = 0.50
//			size = 6
//			value = 6
//			duration = 700
//			requirements =
//			ResourceRates =
//		}
//	}
//}

//@PART[bluedog_TTS1|bluedog_Transit2A|bluedog_IDCSP_Probe|bluedog_Courier_Core|bluedog_Relay_Core|bluedog_Telstar_Core]:NEEDS[FeatureScience,Bluedog_DB]
//{
//	MODULE
//	{
//		name = Early Communication Tests
//		experiment_id = BDBearlyCommTests
//		experiment_description = Perform some basic tests 
//		ec_rate = 0.50
//		data_rate = 6
//		data_rate /= 700
//	}
//}
