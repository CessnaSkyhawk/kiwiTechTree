// Kiwi's Tech Tree Overhaul (Knes by Well Patch)
// Version 0.9
// Created: 23 September 2020 for KSP 1.9.1
// Last Updated: 29 October 2020
// 27 September 2020: Fixed tech node for Multi Role Kapsule DM and Rescue SM
// 12 October 2020: Added entry cost to Knes Vesta 0.625 adapter entry cost balance of P80 Booster
// 18 October 2020: Moved Boop Monoprop Fuel Tank to Basic Flight Control; Moved 1.875-1.25 Abort Adapter
// 24 October 2020: Moved Anubis SRB to Sounding Rockets if CNAR is installed.
// 25 October 2020: Added Upgrades to MonoPropellant Engines and rebalanced; Fixed 0 cost for STEAM Blamont MonoPropellant Module
// 26 October 2020: Changed KiwiAerospace to KiwiTechTree
// 28 October 2020: Altered location of the Hathor Solid Fuel Booster depending on the placement of CNAR
// 29 October 2020: Generalized the ModuleEngines Identifier in B9

// General Patch
@PART[*]:HAS[#manufacturer[Knes]]
{
	@manufacturer = Kerbal aeroNautical Exploration Society Pty. Ltd.
}

//// Other \\\\
// Tier 0 - otherParts
@PART[KIS_snacks_knes]:AFTER[Knes]
{
	@TechRequired = otherParts
}

//// ********* Probes and Communication ********* \\\\

// ***** Probes ***** \\

// Tier 0 - start

// Tier 1 - engineering101

// Tier 2 - science201

// Tier 3 - basicScience

// Tier 4 - earlyProbes

// Tier 5 - communicationSatellites
@PART[_Knes_ATV_Adapter|_Knes_Vesta_Avionic_03125]:AFTER[Knes]
{
	@TechRequired = communicationSatellites // It's a probe
	@cost *= 1
	@entryCost *= 2
}

@PART[_Knes_DiamantB_Avionics_0625]:AFTER[Knes]
{
	@TechRequired = communicationSatellites // It's a probe
	@cost *= 3
	@entryCost *= 2.5
}

// Tier 6 - unmannedTech
@PART[_Knes_Sat_Starlette|_Knes_Sat_Asterix|_Knes_Vega_Avum_Avionics_125|_Knes_DiamantBP4_Avionics_09375]:AFTER[Knes]
{
	@TechRequired = unmannedTech
	@cost *= 4
	@entryCost *= 3
}
// Tier 7 - advUnmanned or automation
@PART[_Knes_Sat_NanoSat|Knes_Command_Cortex]:AFTER[Knes]
{
	@TechRequired = advUnmanned
}

@PART[Knes_Command_Minus|_Knes_L3S_AR4_Avionics|_Knes_L3S_Avionics_250]:AFTER[Knes]
{
	@TechRequired = advUnmanned // It's a probe
	@cost *= 5
	@entryCost *= 2
}
// Tier 8 - largeUnmanned or mechatronics


// Tier 9 - artificialIntelligence



// ***** Adapters, Fairings, Rocket Nose Cones ***** \\
// Tier 0 - start

// Tier 1 - basicRocketry
@PART[Knes_Structural_Kylda_0625]:AFTER[Knes]
{
	@TechRequired = basicRocketry
}
@PART[_Knes_Vesta_Adapter_0625to03125]:AFTER[Knes]
{
	%entryCost = 1500
	@TechRequired = basicRocketry
}

// Tier 2 - basicConstruction
@PART[Knes_Structural_Kylda_125|_Knes_Diamant_Fairing_0625]:AFTER[Knes]
{
	@TechRequired = basicConstruction
}

// Tier 3 - generalConstruction

@PART[Knes_Aero_Fairing_09375|Knes_Aero_Fairing_125|_Knes_Diamant_Fairing_09375|_Knes_Diamant_NoseCone_09375|Knes_Catherine_Adapter_Quad_1875|_Knes_Station_Module_EndCap_0625]:AFTER[Knes]
{
	@TechRequired = generalConstruction
}


// Tier 4 - Advanced Construction - advConstruction
@PART[_Knes_ATV_Flat_Adapter|Knes_Structural_Kylda|_Knes_Station_Module_EndCap_09375]:AFTER[Knes]
{
	@TechRequired = advConstruction // Doesn't Change
	@cost *= 1
	@entryCost *= 2
}
@PART[Knes_Aero_NoseCone_A|Knes_Aero_NoseCone_B|Knes_Aero_Fairing_1875|_Knes_Cora_Adapter_1875_125]:AFTER[Knes]
{
	@TechRequired = advConstruction
	@cost *= 1
	@entryCost *= 1
}



// Tier 5 - Specialized Construction - specializedConstruction
@PART[Knes_Aero_Fairing_250]:AFTER[Knes]
{
	@TechRequired = specializedConstruction
	@cost *= 1
	@entryCost *= 1
}

@PART[_Knes_STEAM_Node]:AFTER[Knes]
{
	@TechRequired = specializedConstruction
	@cost *= 0.5
	@entryCost *= 2
}

// Tier 6 - Advanced MetalWorks - advMetalworks
@PART[Knes_MultiPayload_Adapter_Sylda_AR5_375]:AFTER[Knes]
{
	@TechRequired = advMetalworks
	@cost *= 3
	@entryCost *= 3
}
@PART[Knes_Aero_Fairing_375]:AFTER[Knes]
{
	@TechRequired = advMetalworks
	@cost *= 1
	@entryCost *= 1
}



// Tier 7 - Nanolathing - nanolathing

// Tier 8 - Exotic Alloys - exoticAlloys

// Tier 9 - aerographite





//// ********* Aerodynamics ********* \\\\

// ***** Cockpits and Engines and Air Intakes ***** \\

// Tier 0 - start

// Tier 1 - earlyFlight

// Tier 2 - stability

// Tier 3 - aviation

// Tier 4 - streamlinedFlight

// Tier 5 - supersonicFlight

// Tier 6 - highAltitudeFlight
@PART[Knes_Command_K-IXV]:AFTER[Knes]
{
	@entryCost = 55000
	@cost = 10000
	@TechRequired = highAltitudeFlight
	@maxTemp = 1500
	@skinMaxTemp = 1700
	@RESOURCE[ElectricCharge]
	{
		@amount = 1000
		@maxAmount = 1000
	}
	//@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> // This is added in the structural upgrades
		
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[MonoPropellant]/unitCost$
	@liqCost *= #$RESOURCE[MonoPropellant]/maxAmount$
	@liqCost *= -1
	
	%costAdjust = #$cost$
	@costAdjust += #$liqCost$
	@costAdjust *= 0.3 // Scaling to 30% Increase should be ok
	// Ultimately 30% premium for the cockpit to be space-rated
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = spaceSwitch
		switcherDescription = Space Worthiness
		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = Baseline
			title = Baseline
			descriptionSummary = Baseline
			descriptionDetail = Skin Max Temp: <color=#ff0000>1700k</color>
			addedCost = 0
			defaultSubtypePriority = 0
			primaryColor = #000000
			secondaryColor = #000000
	    }
		
		SUBTYPE
	    {
			name = Improved
			title = Space Capable
			descriptionSummary = Heat resistant materials
			descriptionDetail = Skin Max Temp: <color=#ff0000>2700k</color>
			upgradeRequired = spacePlaneUpgrade
			addedCost = #$../../costAdjust$
			addedMass = 0 // Don't change the mass so we keep the balance of any built planes
			defaultSubtypePriority = 1 // The space-rated one should be the default when it is available to avoid unexpected burn-up in space
			primaryColor = #ffffff
			secondaryColor = #ffffff
			
			skinMaxTemp = 2700
	    }		
	}
}


// Tier 7 - hypersonicFlight
@PART[Knes_Command_K-CEV]:AFTER[Knes]
{
	@entryCost = 60000
	@cost = 12000
	@TechRequired = hypersonicFlight
	@maxTemp = 1500
	@skinMaxTemp = 1700
	@RESOURCE[ElectricCharge]
	{
		@amount = 1000
		@maxAmount = 1000
	}
	//@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> // This is added in the structural upgrades
		
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[MonoPropellant]/unitCost$
	@liqCost *= #$RESOURCE[MonoPropellant]/maxAmount$
	@liqCost *= -1
	
	%costAdjust = #$cost$
	@costAdjust += #$liqCost$
	@costAdjust *= 0.3 // Scaling to 30% Increase should be ok
	// Ultimately 30% premium for the cockpit to be space-rated
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = spaceSwitch
		switcherDescription = Space Worthiness
		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = Baseline
			title = Baseline
			descriptionSummary = Baseline
			descriptionDetail = Skin Max Temp: <color=#ff0000>1700k</color>
			addedCost = 0
			defaultSubtypePriority = 0
			primaryColor = #000000
			secondaryColor = #000000
	    }
		
		SUBTYPE
	    {
			name = Improved
			title = Space Capable
			descriptionSummary = Heat resistant materials
			descriptionDetail = Skin Max Temp: <color=#ff0000>2700k</color>
			upgradeRequired = spacePlaneUpgrade
			addedCost = #$../../costAdjust$
			addedMass = 0 // Don't change the mass so we keep the balance of any built planes
			defaultSubtypePriority = 1 // The space-rated one should be the default when it is available to avoid unexpected burn-up in space
			primaryColor = #ffffff
			secondaryColor = #ffffff
			
			skinMaxTemp = 2700
	    }		
	}
}

@PART[Knes_Hermes]:AFTER[Knes]
{
	@entryCost = 75000
	@cost = 19000
	@TechRequired = hypersonicFlight
	@maxTemp = 1500
	@skinMaxTemp = 1700
	@RESOURCE[ElectricCharge]
	{
		@amount = 3500
		@maxAmount = 3500
	}
	//@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> // This is added in the structural upgrades
		
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[MonoPropellant]/unitCost$
	@liqCost *= #$RESOURCE[MonoPropellant]/maxAmount$
	@liqCost *= -1
	
	%costAdjust = #$cost$
	@costAdjust += #$liqCost$
	@costAdjust *= 0.3 // Scaling to 30% Increase should be ok
	// Ultimately 30% premium for the cockpit to be space-rated
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = spaceSwitch
		switcherDescription = Space Worthiness
		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = Baseline
			title = Baseline
			descriptionSummary = Baseline
			descriptionDetail = Skin Max Temp: <color=#ff0000>1700k</color>
			addedCost = 0
			defaultSubtypePriority = 0
			primaryColor = #000000
			secondaryColor = #000000
	    }
		
		SUBTYPE
	    {
			name = Improved
			title = Space Capable
			descriptionSummary = Heat resistant materials
			descriptionDetail = Skin Max Temp: <color=#ff0000>2850k</color>
			upgradeRequired = spacePlaneUpgrade
			addedCost = #$../../costAdjust$
			addedMass = 0 // Don't change the mass so we keep the balance of any built planes
			defaultSubtypePriority = 1 // The space-rated one should be the default when it is available to avoid unexpected burn-up in space
			primaryColor = #ffffff
			secondaryColor = #ffffff
			
			skinMaxTemp = 2850
	    }		
	}
}

// Tier 8 - aerospaceTech

// Tier 9 - experimentalAerospaceTech




// ***** Structural & Wings & Plane Fuel Tanks ***** \\
// Tier 0 - start

// Tier 1 - earlyFlight

// Tier 2 - stability

// Tier 3 - aviation

// Tier 4 - aerodynamicSystems
@PART[_Knes_Vesta_AirBrake|Knes_IXV_Elevon]:AFTER[Knes]
{
	@TechRequired = aerodynamicSystems
	@cost *= 1
	@entryCost *= 1
}

// Tier 5 - advAerodynamics

// Tier 6 - heavyAerodynamics
@PART[Knes_Airbrake|_Knes_Hermes_Adapter|Knes_Hermes_Aileron*|Knes_Hermes_Rudder*]:AFTER[Knes]
{
	@TechRequired = aerodynamicSystems
	@cost *= 1
	@entryCost *= 1
}

// Tier 7 - experimentalAerodynamics
@PART[Knes_Hermes_HRM]:AFTER[Knes]
{
	@TechRequired = aerodynamicSystems
	@cost *= 1
	@entryCost *= 1
}

// Tier 8 - aerospaceComposites

// Tier 9 - advAerospaceEngineering



//// ********** Utility/Misc *********** \\\\

// ***** Landing Gear and Wheels ***** \\
// Tier 0 - Start

// Tier 1 - earlyFlight

// Tier 2 - stability

// Tier 3 - aviation

// Tier 4 - landing

// Tier 5 - fieldScience
@PART[_Knes_Skid]:AFTER[Knes]
{
	@TechRequired = fieldScience
	@cost *= 1
	@entryCost *= 1
}

// Tier 6 - advLanding
@PART[Knes_Hermes_Gear]:AFTER[Knes]
{
	@TechRequired = advLanding
	@cost *= 1
	@entryCost *= 1
}

// Tier 7 - heavyLanding

// Tier 8 - advancedMotors



// ***** Antenna ***** \\

// Tier 0 - start

// Tier 1 - engineering101
@PART[_Knes_ATV_Antenna|_Knes_DirectAntenna_bread]:AFTER[Knes]
{
	@TechRequired = engineering101
}

// Tier 2 - science201

// Tier 3 - basicScience


// Tier 4 - earlyProbes

// Tier 5 - communicationSatellites
@PART[_Knes_mrk_Antenna]:AFTER[Knes]
{
	@TechRequired = communicationSatellites
}

// Tier 6 - highGainCommunications

// Tier 7 - signalProcessing

// Tier 8 - digitalSignalProcessing

// Tier 9 - xBandCommunications

// Tier 10 - deepSpaceOpticalCommunications

// Tier 11 - quantumCommunications


//// ********* Logistics and Station/Moon Habitation ********* \\\\
// ***** Stations / Colony Pieces ***** \\

// Tier 0 - start

// Tier 1 - engineering101

// Tier 2 - serviceModules

// Tier 3 - skipped

// Tier 4 - recycling

// Tier 5 - hydroponics
@PART[_Knes_STEAM_Hatch]:AFTER[Knes]
{
	@TechRequired = hydroponics
	@entryCost *= 2
	@cost *= 4
}

@PART[_Knes_Station_Module_ScienceLab]:AFTER[Knes]
{
	@TechRequired = earlyStations
	@entryCost *= 2
	@cost *= 5
}

// Tier 6 - earlyStations
@PART[_Knes_ATV_Cargo|_Knes_Station_Module_Hab]:AFTER[Knes]
{
	@TechRequired = earlyStations
	@entryCost *= 2
	@cost *= 2
}
@PART[_Knes_ATV_Cargo]:NEEDS[StationPartsExpansionRedux]:AFTER[Knes]
{
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cargoSwitch
		switcherDescription = #LOC_SSPX_Switcher_Cargo_Name
		baseVolume = 8000
		switchInFlight = True
		affectDragCubes = false
		SUBTYPE
		{
			name = Ore
			tankType = knesOre
			title = #LOC_SSPX_Switcher_Cargo_Ore
		}
	}
}


@PART[_Knes_STEAM_ScienceLab]:AFTER[Knes]
{
	@TechRequired = earlyStations
	@entryCost *= 2 // Make it more expensive given that it is smaller and earlier
	@cost *= 1
}

@PART[_Knes_Station_Module_CrystalFactory]:AFTER[Knes]
{
	@TechRequired = earlyStations
	@entryCost *= 10 // Make it more expensive given that it is smaller and earlier
	@cost = 12000
	!RESOURCE[Crystal] {}
}


// Tier 7 - shortTermHabitation
@PART[_Knes_STEAM_CrystalLab]:AFTER[Knes]
{
	@TechRequired = shortTermHabitation
	@entryCost *= 10
	@cost = 20000
	
	!RESOURCE[Crystal] {}
}


// Tier 8 - longTermHabitation

// Tier 9 - advancedStations

// Tier 10 - colonization

// Tier 11 - advColonization


// ***** Re-entry Pods ***** \\

// Tier 3 - basicReentryModule
@PART[Knes_Crew_Pod_09375]:AFTER[Knes]
{
	@TechRequired = basicReentryModule
	@entryCost = 5000
	@cost = 1500
}

// Tier 4 - reentryModule

// Tier 5 - advancedReentryModule
@PART[_Knes_mrk_Pod]:AFTER[Knes]
{
	@TechRequired = advancedReentryModule
	@entryCost = 9000
	@cost = 3000
}

@PART[_Knes_mrk_Pod_Rescue]:AFTER[Knes]
{
	@TechRequired = advancedReentryModule
	@entryCost = 12000
	@cost = 5000
}


@PART[_Knes_mrk_Pod]:NEEDS[StationPartsExpansionRedux]:AFTER[Knes]
{
	@entryCost = 7500
	@cost = 3000
	!RESOURCE[Crystal] {}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cargoSwitch
		switcherDescription = #LOC_SSPX_Switcher_Cargo_Name
		baseVolume = 1000
		switchInFlight = True
		affectDragCubes = false
		SUBTYPE
		{
			name = Ore
			tankType = knesOre
			title = #LOC_SSPX_Switcher_Cargo_Ore
		}
	}
}


// ***** Storage/Resources ***** \\
// Tier 0 - start

// Tier 1 - engineering101

// Tier 2 - serviceModules
@PART[Knes_Cargo_Pod_09375]:AFTER[Knes]
{
	@TechRequired = serviceModules
}
@PART[Knes_Cargo_Pod_09375]:NEEDS[StationPartsExpansionRedux]:AFTER[Knes]
{
	@entryCost = 3000
	@cost = 1500
	!RESOURCE[Crystal] {}
	!RESOURCE[Ore] {}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cargoSwitch
		switcherDescription = #LOC_SSPX_Switcher_Cargo_Name
		baseVolume = 750
		switchInFlight = True
		affectDragCubes = false
		SUBTYPE
		{
			name = Ore
			tankType = knesOre
			title = #LOC_SSPX_Switcher_Cargo_Ore
		}
	}
}

// Tier 3 - Skipped

// Tier 4 - storageTech

// Tier 5 - earlyLogistics
@PART[_Knes_STEAM_125_cargo|_Knes_mrk_SM_Cargo|_Knes_mrk_SM_Rescue|_Knes_mrk_SM_Extended|_Knes_mrk_Cargo]:AFTER[Knes]
{
	@TechRequired = earlyLogistics
	@entryCost *= 1
	@cost *= 1
}

@PART[_Knes_STEAM_Cargo_Tank]:AFTER[Knes]
{
	@TechRequired = earlyLogistics
	@cost += 600 // Otherwise it is a costless part due to the cost of the MonoPropellant
}

@PART[_Knes_mrk_Cargo]:NEEDS[StationPartsExpansionRedux]:AFTER[Knes]
{
	@entryCost = 7500
	@cost = 3000
	!RESOURCE[Crystal] {}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cargoSwitch
		switcherDescription = #LOC_SSPX_Switcher_Cargo_Name
		baseVolume = 5000
		switchInFlight = True
		affectDragCubes = false
		SUBTYPE
		{
			name = Ore
			tankType = knesOre
			title = #LOC_SSPX_Switcher_Cargo_Ore
		}
	}
}


@PART[_Knes_STEAM_125_cargo]:NEEDS[StationPartsExpansionRedux]:AFTER[Knes]
{
	!RESOURCE[Ore] {}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cargoSwitch
		switcherDescription = #LOC_SSPX_Switcher_Cargo_Name
		baseVolume = 1200
		switchInFlight = True
		affectDragCubes = false
		SUBTYPE
		{
			name = Ore
			tankType = knesOre
			title = #LOC_SSPX_Switcher_Cargo_Ore
		}
	}
}

// Tier 6 - logistics
@PART[_Knes_ATV_SM]:AFTER[Knes]
{
	@TechRequired = logistics
	@entryCost *= 1
	@cost *= 1
}

// Tier 7 - isru

// Tier 8 - advLogistics

// Tier 9 - advOffworldMining

// Tier 10 - resourceExploitation



// ***** Solar and Fuel Cells ***** \\

// Tier 0 - start

// Tier 1 Engineering 101 - engineering101

// Tier 2 - Science 201 - science201

// Tier 3 - batteryTech
@PART[_Knes_Flat_SolarPanel_NanoSat]:AFTER[Knes]
{
	@TechRequired = batteryTech
}
@PART[_Knes_Flat_SolarPanel_NanoSat]:NEEDS[NearFutureSolar]:AFTER[Knes] 
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	basePower = #$MODULE[ModuleDeployableSolarPanel]/chargeRate$
	advancedPower = #$basePower$
	@advancedPower *= 1.3
	concentratingPower = #$basePower$
	@concentratingPower *= 1.75
	
	advancedMass = #$mass$
	@advancedMass *= 0.25
	concentratingMass = #$mass$
	@concentratingMass *= 0.85
	
	advancedCost = #$cost$
	@advancedCost *= 0.35
	
	concentratingCost = #$cost$
	@concentratingCost *= 1.1
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cellSwitch
		switcherDescription = #LOC_NFSolar_switcher_cell_title
		affectDragCubes = False
		affectFARVoxels = False

		SUBTYPE
		{
			name = Basic
			title = #LOC_NFSolar_switcher_cell_basic_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_basic_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_basic_detail
			primaryColor = #5d7682
			secondaryColor = #5d7682
			addedCost = 0
			addedMass = 0
			
			defaultSubtypePriority = 1

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../basePower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Advanced
			title = #LOC_NFSolar_switcher_cell_adv_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_adv_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_adv_detail
			primaryColor = #2d373c
			secondaryColor = #2d373c
			
			upgradeRequired = kiwiSolarTier3_Advanced
			addedMass = #$../../advancedMass$
			addedCost = #$../../advancedCost$		
			
			defaultSubtypePriority = 0
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../advancedPower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Concentrating
			title = #LOC_NFSolar_switcher_cell_concentrating_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_concentrating_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_concentrating_detail
			primaryColor = #000000
			secondaryColor = #000000
			
			upgradeRequired = kiwiSolarTier3_Concentrating
			addedMass = #$../../concentratingMass$
			addedCost = #$../../concentratingCost$	
			
			
			defaultSubtypePriority = 0

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../concentratingPower$
				}
			}
		}
	}
}

// Tier 4 - electrics
@PART[_Knes_mrk_SolarPanel|_Knes_mrk_SolarPanel_Nano|_Knes_mrk_SolarPanel_Pyld]:AFTER[Knes]
{
	@TechRequired = electrics
}
@PART[_Knes_mrk_SolarPanel|_Knes_mrk_SolarPanel_Nano|_Knes_mrk_SolarPanel_Pyld]:NEEDS[NearFutureSolar]:AFTER[Knes] 
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	basePower = #$MODULE[ModuleDeployableSolarPanel]/chargeRate$
	advancedPower = #$basePower$
	@advancedPower *= 1.3
	concentratingPower = #$basePower$
	@concentratingPower *= 1.75
	
	advancedMass = #$mass$
	@advancedMass *= 0.25
	concentratingMass = #$mass$
	@concentratingMass *= 0.85
	
	advancedCost = #$cost$
	@advancedCost *= 0.35
	
	concentratingCost = #$cost$
	@concentratingCost *= 1.1
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cellSwitch
		switcherDescription = #LOC_NFSolar_switcher_cell_title
		affectDragCubes = False
		affectFARVoxels = False

		SUBTYPE
		{
			name = Basic
			title = #LOC_NFSolar_switcher_cell_basic_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_basic_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_basic_detail
			primaryColor = #5d7682
			secondaryColor = #5d7682
			addedCost = 0
			addedMass = 0
			
			defaultSubtypePriority = 1

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../basePower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Advanced
			title = #LOC_NFSolar_switcher_cell_adv_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_adv_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_adv_detail
			primaryColor = #2d373c
			secondaryColor = #2d373c
			
			upgradeRequired = kiwiSolarTier4_Advanced
			addedMass = #$../../advancedMass$
			addedCost = #$../../advancedCost$		
			
			defaultSubtypePriority = 0
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../advancedPower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Concentrating
			title = #LOC_NFSolar_switcher_cell_concentrating_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_concentrating_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_concentrating_detail
			primaryColor = #000000
			secondaryColor = #000000
			
			upgradeRequired = kiwiSolarTier4_Concentrating
			addedMass = #$../../concentratingMass$
			addedCost = #$../../concentratingCost$	
			
			
			defaultSubtypePriority = 0

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../concentratingPower$
				}
			}
		}
	}
}

// Tier 5 - advElectrics
@PART[_Knes_ATV_SolarPanel|_Knes_mrk_SolarPanel_Pyld_Track]:AFTER[Knes]
{
	@TechRequired = advElectrics
}
@PART[_Knes_ATV_SolarPanel|_Knes_mrk_SolarPanel_Pyld_Track]:NEEDS[NearFutureSolar]:AFTER[Knes] 
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	basePower = #$MODULE[ModuleDeployableSolarPanel]/chargeRate$
	advancedPower = #$basePower$
	@advancedPower *= 1.3
	concentratingPower = #$basePower$
	@concentratingPower *= 1.75
	
	advancedMass = #$mass$
	@advancedMass *= 0.25
	concentratingMass = #$mass$
	@concentratingMass *= 0.85
	
	advancedCost = #$cost$
	@advancedCost *= 0.35
	
	concentratingCost = #$cost$
	@concentratingCost *= 1.1
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cellSwitch
		switcherDescription = #LOC_NFSolar_switcher_cell_title
		affectDragCubes = False
		affectFARVoxels = False

		SUBTYPE
		{
			name = Basic
			title = #LOC_NFSolar_switcher_cell_basic_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_basic_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_basic_detail
			primaryColor = #5d7682
			secondaryColor = #5d7682
			addedCost = 0
			addedMass = 0
			
			defaultSubtypePriority = 1

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../basePower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Advanced
			title = #LOC_NFSolar_switcher_cell_adv_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_adv_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_adv_detail
			primaryColor = #2d373c
			secondaryColor = #2d373c
			
			upgradeRequired = kiwiSolarTier5_Advanced
			addedMass = #$../../advancedMass$
			addedCost = #$../../advancedCost$		
			
			defaultSubtypePriority = 0
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../advancedPower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Concentrating
			title = #LOC_NFSolar_switcher_cell_concentrating_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_concentrating_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_concentrating_detail
			primaryColor = #000000
			secondaryColor = #000000
			
			upgradeRequired = kiwiSolarTier5_Concentrating
			addedMass = #$../../concentratingMass$
			addedCost = #$../../concentratingCost$	
			
			
			defaultSubtypePriority = 0

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../concentratingPower$
				}
			}
		}
	}
}

// Tier 6 - largeElectrics (High-Power Electrics)
@PART[_Knes_mrk_SolarArray]:AFTER[Knes]
{
	@TechRequired = largeElectrics
}
@PART[_Knes_mrk_SolarArray]:NEEDS[NearFutureSolar]:AFTER[Knes] 
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	basePower = #$MODULE[ModuleDeployableSolarPanel]/chargeRate$
	advancedPower = #$basePower$
	@advancedPower *= 1.3
	concentratingPower = #$basePower$
	@concentratingPower *= 1.75
	
	advancedMass = #$mass$
	@advancedMass *= 0.25
	concentratingMass = #$mass$
	@concentratingMass *= 0.85
	
	advancedCost = #$cost$
	@advancedCost *= 0.35
	
	concentratingCost = #$cost$
	@concentratingCost *= 1.1
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = cellSwitch
		switcherDescription = #LOC_NFSolar_switcher_cell_title
		affectDragCubes = False
		affectFARVoxels = False

		SUBTYPE
		{
			name = Basic
			title = #LOC_NFSolar_switcher_cell_basic_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_basic_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_basic_detail
			primaryColor = #5d7682
			secondaryColor = #5d7682
			addedCost = 0
			addedMass = 0
			
			defaultSubtypePriority = 1

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../basePower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Advanced
			title = #LOC_NFSolar_switcher_cell_adv_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_adv_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_adv_detail
			primaryColor = #2d373c
			secondaryColor = #2d373c
			
			upgradeRequired = kiwiSolarTier6_Advanced
			addedMass = #$../../advancedMass$
			addedCost = #$../../advancedCost$		
			
			defaultSubtypePriority = 0
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../advancedPower$
				}
			}
		}
		
		SUBTYPE
		{
			name = Concentrating
			title = #LOC_NFSolar_switcher_cell_concentrating_title
			descriptionSummary = #LOC_NFSolar_switcher_cell_concentrating_summary
			descriptionDetail = #LOC_NFSolar_switcher_cell_concentrating_detail
			primaryColor = #000000
			secondaryColor = #000000
			
			upgradeRequired = kiwiSolarTier6_Concentrating
			addedMass = #$../../concentratingMass$
			addedCost = #$../../concentratingCost$	
			
			
			defaultSubtypePriority = 0

			MODULE
			{
				IDENTIFIER
				{
					name = ModuleDeployableSolarPanel
				}
				DATA 
				{
					chargeRate = #$../../../../concentratingPower$
				}
			}
		}
	}
}

// Tier 7 - advSolarTech 

// Tier 8 - Advanced Photovoltaic Materials (advPVMaterials) / Cutting-Edge Solar Technology (cuttingEdgeSolarTech)

// Tier 9 - Microwave Power Transmission / Exotic Solar Technology (exoticSolarTech)

// Tier 10 - Omega Solar Technology (omegaSolarTech)

// ***** Batteries ***** \\

// Tier 0

// Tier 1 Engineering 101 - engineering101

// Tier 2 - Science 201 - science201

// Tier 3 - Basic Science - basicScience

// Tier 4 - Electrics - electrics

// Tier 5 - Advanced Electrics - advElectrics
@PART[_Knes_STEAM_Power_Module]:AFTER[Knes] 
{
	@TechRequired = advElectrics
	@cost *= 6
	@entryCost *= 12 // Quite cheap otherwise compared to stock
}


// Tier 6 - High-Power Electrics // largeElectrics

// Tier 7 - Specialized Electrics - specializedElectrics

// Tier 8 - Experimental Electrics - experimentalElectrics

// Tier 9 - High Tech Electrical Systems - highTechElectricalSystems

// Tier 10 - High Power Electrical Systems - highPowerElectricalSystems

// Tier 11 - Experimental Electrical Systems - experimentalElectricalSystems

// Tier 12 - Exotic Electrical Systems - exoticElectricalSystems


// ***** Flight Control: Monopropellant Tanks, RCS Thrusters, SAS Modules, Launch Escape Systems ***** \\
// Tier 0 - Start

// Tier 1 - earlyFlight
@PART[_Knes_Veronique_Aileron]:AFTER[Knes]
{
	@TechRequired = earlyFlight
}

// Tier 2 - basicFlightControl
@PART[_Knes_RCS_Bump_tank]:AFTER[Knes] 
{
	@TechRequired = basicFlightControl
	@cost *= 1
	@entryCost *= 1
}

// Tier 3 - flightControl
@PART[Knes_Utility_SafeSystem|_Knes_Control_LowProfile_RCS_0625|Knes_EscapeTower_Small|Knes_MonoProp_FuelTank_Medium_09375|Knes_MonoProp_FuelTank_Nano_09375]:AFTER[Knes] 
{
	@TechRequired = flightControl
	@cost *= 1
	@entryCost *= 1
}
// Tier 4 - advFlightControl
@PART[Knes_Utility_SafeSystem_1875|_Knes_RCS_3way|_Knes_mrk_LES]:AFTER[Knes] 
{
	@TechRequired = advFlightControl
	@cost *= 1
	@entryCost *= 1
}

// Tier 5 - specializedControl
@PART[_Knes_RCS_Bump_roll|_Knes_mrk_Thruster]:AFTER[Knes] 
{
	@TechRequired = specializedControl
	@cost *= 1
	@entryCost *= 1
}

// Tier 6 - experimentalControl

// Tier 7 - exoticControl


//// ********* Decouplers/Separators/DockingPorts/EnginePlates ********* \\\\

// Tier 0

// Tier 1

// Tier 2 Basic Construction - basicConstruction
@PART[Knes_Decoupler_G0625|_Knes_Diamant_Decoupler_0625|_Knes_Veronique_Decoupler_03125]:AFTER[Knes] 
{
	@TechRequired = basicConstruction
	@cost *= 1
	@entryCost *= 1
}

// Tier 3 Decoupling - decoupling
@PART[Knes_Decoupler_Radial_Small|Knes_Decoupler_G1250|Knes_Decoupler_G09375|_Knes_Diamant_Decoupler_09375]:AFTER[Knes] 
{
	@TechRequired = decoupling
	@cost *= 1
	@entryCost *= 1
}

// Tier 4 Docking - docking
@PART[Knes_Decoupler_G1875|Knes_DockingPortJr_0625]:AFTER[Knes] 
{
	@TechRequired = docking
	@cost *= 1
	@entryCost *= 1
}

// Tier 5 Advanced Decoupling -advancedDecoupling
@PART[Knes_Decoupler_Radial_big]:AFTER[Knes] 
{
	@TechRequired = advancedDecoupling
	@cost *= 2
	@entryCost *= 2
}

@PART[Knes_Decoupler_G2500|_Knes_mrk_ECBM_Active|_Knes_mrk_ECBM|_Knes_mrk_Decoupler]:AFTER[Knes]
{
	@TechRequired = advancedDecoupling
	@cost *= 1
	@entryCost *= 1
}

// Tier 6 Engine Plates - enginePlates
@PART[Knes_Decoupler_G3750]:AFTER[Knes] 
{
	@TechRequired = enginePlates
	@cost *= 1
	@entryCost *= 1
}

// Tier 7 Advanced Docking - advancedDocking
@PART[Knes_Decoupler_G5000]:AFTER[Knes] 
{
	@TechRequired = advancedDocking
	@cost *= 1
	@entryCost *= 1
}

// Tier 8 Advanced Engine Plates - advancedEnginePlates

// Tier 9 Automated Decoupling Systems - automatedDecouplingSystems

// Tier 10 extremeFuelStorage


// ***** Parachutes ***** \\

// Tier 2 - survivability

// Tier 3 - enhancedSurvivability

// Tier 4 - spaceExploration
@PART[Knes_Paraglider_Steerable_srf|Knes_Paraglider_srf|_Knes_mrk_Parachute]:AFTER[Knes] 
{
	@TechRequired = spaceExploration
	@cost *= 1
	@entryCost *= 1
}

// Tier 5 - advExploration


// ***** Liquid Fuel ***** \\

// Tier 0 - start

// Tier 1 - basicRocketry; 0.625m Fuel Tank


// Tier 2 - earlyFuelSystems ; Intro of the 1.25m tank, a larger 0.625 piece
@PART[_Knes_Nano_Cryo_FuelTank_09375]:AFTER[Knes] 
{
	@TechRequired = earlyFuelSystems
	@cost *= 1
	@entryCost *= 4
}

@PART[_Knes_Diamant2_FuelTank_nano_0625|_Knes_Veronique_FuelTank_03125|_Knes_Mireille_LFO_short_09375]:AFTER[Knes] 
{
	@TechRequired = earlyFuelSystems
	@cost *= 1
	@entryCost *= 1.5
}

// Tier 3 - basicFuelSystems // Intro of the 1.875 if Making History installed
@PART[_Knes_Diamant2_FuelTank_small_0625|_Knes_Mireille_LFO_medium_09375]:AFTER[Knes] 
{
	@TechRequired = basicFuelSystems
	@cost *= 1
	@entryCost *= 2
}


// Tier 4 - fuelSystems // Intro of the 2.5m
@PART[_Knes_L3S_H4|]:AFTER[Knes] 
{
	@TechRequired = fuelSystems
	@cost *= 1
	@entryCost += 3000
}

@PART[_Knes_L3S_Cryo_LH2_125|_Knes_Coralie_LFO_125|_Knes_Mireille_LFO_long_09375]:AFTER[Knes] 
{
	@TechRequired = fuelSystems
	@cost *= 1
	@entryCost *= 4
}

@PART[_Knes_Small_Cryo_FuelTank_09375]:AFTER[Knes] 
{
	@TechRequired = fuelSystems
	@cost *= 1
	@entryCost *= 3
}

@PART[_Knes_Diamant2_FuelTank_Long_0625]:AFTER[Knes] 
{
	@TechRequired = fuelSystems
	@cost *= 1
	@entryCost *= 3.5
}

// Tier 5 - advFuelSystems - Intro of the 3.75m
@PART[_Knes_DiamantA_FuelTank_09375]:AFTER[Knes] 
{
	@TechRequired = advFuelSystems
	@cost *= 1
	@entryCost *= 8
}

@PART[Knes_Fuel_Tanks_Small|_Knes_Vesta_FuelTank_0625_3125]:AFTER[Knes] 
{
	@TechRequired = advFuelSystems
	@cost *= 1
	@entryCost *= 1
}

@PART[_Knes_Carmen_FuelTank_125]:AFTER[Knes] 
{
	@TechRequired = advFuelSystems
	@cost *= 1
	@entryCost *= 5
}


// Tier 6 - largeVolumeContainment // Intro of the 5m Large Volume Containment
@PART[Knes_Fuel_Tanks_Medium]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 1
}
@PART[_Knes_DiamantB_FuelTank_09375]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 8
}
@PART[Knes_Fuel_Tanks_1875_H10]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 2.5
}

@PART[_Knes_L3S_H8|_Knes_L3S_L33]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 2.5
}
@PART[_Knes_L3S_H22]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 5.5
}

@PART[_Knes_Carmen_FuelTank_Extended_125]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 5
}





// Tier 7 - highPerformanceFuelSystems // Intro of the 7.5m High Performance Fuel Systems
@PART[_Knes_L3S_H45]:AFTER[Knes] 
{
	@TechRequired = largeVolumeContainment
	@cost *= 1
	@entryCost *= 3
}

// Tier 8 - specializedFuelStorage Specialized Fuel Storage
@PART[Knes_Fuel_Tanks_EPC]:AFTER[Knes] 
{
	@TechRequired = specializedFuelStorage
	@cost *= 1
	@entryCost *= 1
}

// Tier 9 - exoticFuelStorage

// Tier 10 - extremeFuelStorage



//// ********* Engines ********* \\\\

// ***** Liquid Fuel ***** \\

// Tier 0 - start, just the small jet engine to allow for the aeronautics branch

// Tier 1 - basicRocketry , a basic 0.625m engine that helps get us off the ground
@PART[_Knes_Vesta_Engine_0625]:AFTER[Knes] // LRBA-V "Gauntness" Engine
{
	// Need this to process first and will use this as the basis in which the balance hydrolox/metholox version
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 255
            key = 1 200
			key = 6 0.001
        }
	}
}

@PART[_Knes_Vesta_Engine_0625]:AFTER[Knes] // LRBA-V "Gauntness" Engine
{	
	@title = MT-2 "Celtica" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = basicRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 2000
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 29.8 kN ASL / 38.0 kN Vac.\n<b>Isp:</b> 200.0 s ASL / 255.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :2:2C:
			@title ^= :Celtica:Galatia:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 35.8 kN ASL / 45.6 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 280.5 s Vac.
			upgradeRequired = celticaUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}



@PART[_Knes_Veronique_Engine_03125]:AFTER[Knes] // AGI-E "Vekin" Engine
{
	// Need this to process first and will use this as the basis in which the balance hydrolox/metholox version
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 260
            key = 1 230
			key = 6 0.001
        }
	}
}

@PART[_Knes_Veronique_Engine_03125]:AFTER[Knes] // AGI-E "Vekin" Engine
{	
	@title = MT-0 "Vekin" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = basicRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 1000
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 8.8 kN ASL / 10.0 kN Vac.\n<b>Isp:</b> 230.0 s ASL / 260.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :0:0A:
			@title ^= :Vekin:Hobelar:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 10.6 kN ASL / 12.0 kN Vac.\n<b>Isp:</b> 253.0 s ASL / 286.0 s Vac.
			upgradeRequired = vekinUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_H3_Engine_0625]:AFTER[Knes] // KEREB-D "Olaf" Cryogenic Engine
{
	// Need this to process first and will use this as the basis in which the balance hydrolox/metholox version
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 290
            key = 1 213
			key = 6 0.001
        }
	}
}

@PART[_Knes_H3_Engine_0625]:NEEDS[!CryoEngines]:AFTER[Knes] // KEREB-D "Olaf" Cryogenic Engine
{	
	@title = MT-7 "Morwenna" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = basicRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 2000
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 8.8 kN ASL / 12.0 kN Vac.\n<b>Isp:</b> 213.0 s ASL / 290.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :7:12A:
			@title ^= :Morwenna:Ysabelle:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 10.6 kN ASL / 14.4 kN Vac.\n<b>Isp:</b> 234.3 s ASL / 319.0 s Vac.
			upgradeRequired = morwennaUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 2 - generalRocketry ; Stronger 0.625m engine and initial 1.25m engine
@PART[_Knes_Mireille_Engine_09375]:AFTER[Knes] // M-R6 "Mirabelle" Rocket Engine
{
	// Need this to process first
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 65
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 260
            key = 1 245
			key = 4 0.001
        }
	}
}

@PART[_Knes_Mireille_Engine_09375]:AFTER[Knes] // M-R6 "Mirabelle" Rocket Engine
{	
	@title = M-R6 "Mirabelle" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = generalRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 3500
	@cost = 800
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 61.3 kN ASL / 65.0 kN Vac.\n<b>Isp:</b> 245.0 s ASL / 260.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :R6:R6+:
			@title ^= :Mirabelle:Nausicaa:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 73.5 kN ASL / 78.0 kN Vac.\n<b>Isp:</b> 269.5 s ASL / 286.0 s Vac.
			upgradeRequired = mirabelleUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_HM4_Engine]:AFTER[Knes] // HM4 "Themis" Cryogenic Engine
{
	// Need this to process first and will use this as the basis in which the balance hydrolox/metholox version
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 45 // Increase thrust
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 295 // Decrease ISP
            key = 1 210
			key = 6 0.001
        }
	}
}

@PART[_Knes_L3S_HM4_Engine]:NEEDS[!CryoEngines]:AFTER[Knes] // HM4 "Themis" Cryogenic Engine
{	
	@title = MT-23 "Chilawee" Liquid Fuel Engine
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = generalRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 2500
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 32.0 kN ASL / 45.0 kN Vac.\n<b>Isp:</b> 210.0 s ASL / 295.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :23:23A:
			@title ^= :Chilawee:Chikanee:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 38.4 kN ASL / 54.0 kN Vac.\n<b>Isp:</b> 231.0 s ASL / 324.5 s Vac.
			upgradeRequired = chilaweeUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_H2_Engine_09375]:AFTER[Knes] // KEREB-D "Crinkle" Cryogenic Engine
{
	// Need this to process first and will use this as the basis in which the balance hydrolox/metholox version
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 310
            key = 1 90
			key = 6 0.001
        }
	}
}

@PART[_Knes_H2_Engine_09375]:NEEDS[!CryoEngines]:AFTER[Knes] // KEREB-D "Crinkle" Cryogenic Engine
{	
	@title = MT-17 "Bianca" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = generalRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 2500
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 6.4 kN ASL / 22.0 kN Vac.\n<b>Isp:</b> 90.0 s ASL / 310.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :17:17F:
			@title ^= :Bianca:Bernard:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 7.7 kN ASL / 26.4 kN Vac.\n<b>Isp:</b> 99.0 s ASL / 341.0 s Vac.
			upgradeRequired = biancaUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}



// Tier 3 - advRocketry ; Intro of the 1.875m engine in Making History
@PART[_Knes_Diane_Engine_125]:AFTER[Knes] // M-R12 "Calypso" Rocket Engine
{
	// Need this to process first
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 250
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 280
            key = 1 255
			key = 4 0.001
        }
	}
}

@PART[_Knes_Diane_Engine_125]:AFTER[Knes] // M-R12 "Calypso" Rocket Engine
{	
	@title = M-R12 "Calypso" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 5000
	@cost = 1500
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 227.7 kN ASL / 250.0 kN Vac.\n<b>Isp:</b> 255.0 s ASL / 280.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :R12:R14:
			@title ^= :Calypso:Athena:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 273.2 kN ASL / 300.0 kN Vac.\n<b>Isp:</b> 280.5 s ASL / 308.0 s Vac.
			upgradeRequired = calypsoUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_Cora_Engine_SL]:AFTER[Knes] // C-SL12 "Penelope" Rocket Engine
{
	// Need this to process first
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 140.0
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 280
            key = 1 260
			key = 4 0.001
        }
	}
}

@PART[_Knes_Cora_Engine_SL]:AFTER[Knes] // C-R12 "Penelope" Rocket Engine
{	
	@title = C-SL12 "Penelope" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 4000
	@cost = 1000
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 130.0 kN ASL / 140.0 kN Vac.\n<b>Isp:</b> 260.0 s ASL / 280.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :SL12:SSL9:
			@title ^= :Penelope:Helen:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 156.0 kN ASL / 168.0 kN Vac.\n<b>Isp:</b> 286.0 s ASL / 308.0 s Vac.
			upgradeRequired = penelope2Upgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_Cora_Engine_1]:AFTER[Knes] // C-R12 "Penelope" Rocket Engine
{
	// Need this to process first
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 305
            key = 1 285
			key = 4 0.001
        }
	}
}

@PART[_Knes_Cora_Engine_1]:AFTER[Knes] // C-R12 "Penelope" Rocket Engine
{	
	@title = C-R12 "Penelope" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 4000
	@cost = 1000
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 107.5 kN ASL / 115.0 kN Vac.\n<b>Isp:</b> 285.0 s ASL / 305.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :R12:S9:
			@title ^= :Penelope:Helen:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 129.0 kN ASL / 138.0 kN Vac.\n<b>Isp:</b> 313.5 s ASL / 335.5 s Vac.
			upgradeRequired = penelopeUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_Diamant_Engine_09375]:AFTER[Knes] // KEREB-D "Riotous" Engine
{
	// Need this to process first
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {} // Delete the original, OP in high pressure atmosphere
		atmosphereCurve
        {
            key = 0 250
            key = 1 213
			key = 4 0.001
        }
	}
}

@PART[_Knes_Diamant_Engine_09375]:AFTER[Knes] // KEREB-D "Riotous" Engine
{	
	@title = AR-2 "Winesap" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 5000
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 68.2 kN ASL / 80.0 kN Vac.\n<b>Isp:</b> 213.0 s ASL / 250.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :2:2A:
			@title ^= :Winesap:Honeycrisp:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 81.8 kN ASL / 96.0 kN Vac.\n<b>Isp:</b> 234.3 s ASL / 275.0 s Vac.
			upgradeRequired = winesapUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[Knes_Engine_Zebulon]:AFTER[Knes] // HM7 "Zebulon" Liquid Fuel Engine
{	
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 5000
	@cost *= 1
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 37.1 kN ASL / 54.0 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 320.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :7:7Q:
			@title ^= :Zebulon:Reuben:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 44.6 kN ASL / 64.8 kN Vac.\n<b>Isp:</b> 242.0 s ASL / 352.0 s Vac.
			upgradeRequired = zebulonUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_Engine_Viking5]:AFTER[Knes] // L3S "Viking 5" Liquid Fuel Engine
{	
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = advRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost = 7500
	@cost = 1456
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 175.6 kN ASL / 185.0 kN Vac.\n<b>Isp:</b> 280.0 s ASL / 295.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :L3S:L3SMk2:
			@title ^= :Viking 5:Viking 5X:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 210.7 kN ASL / 222.0 kN Vac.\n<b>Isp:</b> 308.0 s ASL / 324.5 s Vac.
			upgradeRequired = viking5Upgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 4 - heavyRocketry Heavy Rocketry, Intro of 2.5m engines
@PART[_Knes_L3S_L33_Engine]:AFTER[Knes] // L33 "Byrding" Liquid Fuel Engine
{	
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = heavyRocketry
	@entryCost = 18000
	@cost = 3900
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 359.7 kN ASL / 404.0 kN Vac.\n<b>Isp:</b> 260.0 s ASL / 292.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :33:33J:
			@title ^= :Byrding:Knarr:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 431.7 kN ASL / 484.8 kN Vac.\n<b>Isp:</b> 286.0 s ASL / 321.2 s Vac.
			upgradeRequired = byrdingUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 5 - heavierRocketry Heavier Rocketry
@PART[_Knes_Catherine_Stage_1875]:AFTER[Knes] // Heracles "Arcas" Stage
{
	@MODULE[ModuleEnginesFX]
	{
		atmosphereCurve
        {
			key = 0 300
			key = 1 280
			key = 6 0.001
		}
	}
}

@PART[_Knes_Catherine_Stage_1875]:AFTER[Knes] // Heracles "Arcas" Stage
{	
	@title = L-20 "Arcas" Liquid Fuel Engine Cluster
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = heavierRocketry
	@entryCost = 10000
	@cost += 2000
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[LiquidFuel]/unitCost$
	@liqCost *= #$RESOURCE[LiquidFuel]/maxAmount$
	%oxiCost = #$@RESOURCE_DEFINITION[Oxidizer]/unitCost$
	@oxiCost *= #$RESOURCE[Oxidizer]/maxAmount$
	@liqCost += #$oxiCost$ // Total Costs of Fuel
	@liqCost *= -1
	
	%addCost = #$cost$
	@addCost += #$liqCost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 420.0 kN ASL / 450.0 kN Vac.\n<b>Isp:</b> 280.0 s ASL / 300.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :20:24:
			@title ^= :Arcas:Erato:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 504.0 kN ASL / 540.0 kN Vac.\n<b>Isp:</b> 308.0 s ASL / 330.0 s Vac.
			upgradeRequired = arcasUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_PAL]:AFTER[Knes] // Ariane "Drako" PAL Booster
{
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 295
		atmosphereCurve
        {
			key = 0 274
			key = 1 246
			key = 6 0.001
		}
	}
}

@PART[_Knes_L3S_PAL]:AFTER[Knes] // Ariane "Drako" PAL Booster
{	
	@title = L-35 "Drako" Liquid Fuel Engine
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = heavierRocketry
	@entryCost = 10000
	@cost += 2000
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[LiquidFuel]/unitCost$
	@liqCost *= #$RESOURCE[LiquidFuel]/maxAmount$
	%oxiCost = #$@RESOURCE_DEFINITION[Oxidizer]/unitCost$
	@oxiCost *= #$RESOURCE[Oxidizer]/maxAmount$
	@liqCost += #$oxiCost$ // Total Costs of Fuel
	@liqCost *= -1
	
	%addCost = #$cost$
	@addCost += #$liqCost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 264.9 kN ASL / 295.0 kN Vac.\n<b>Isp:</b> 246.0 s ASL / 274.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :35:41:
			@title ^= :Drako:Tatsu:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 317.8 kN ASL / 354.0 kN Vac.\n<b>Isp:</b> 270.6 s ASL / 301.4 s Vac.
			upgradeRequired = drakoUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_L3S_HM60_Engine]:AFTER[Knes] // HM60 "Themis" Liquid Fuel Engine
{	
	@mass = 2.0 // A bit heavier
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = heavierRocketry
	@entryCost = 25000
	@cost = 5600
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 405.6 kN ASL / 590.0 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 320.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :60:62B:
			@title ^= :Themis:Oracle:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 486.8 kN ASL / 708.0 kN Vac.\n<b>Isp:</b> 242.0 s ASL / 352.0 s Vac.
			upgradeRequired = themisUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 6 - evenHeavierRocketry Even Heavier Rocketry Intro of 3.75m engines
@PART[_Knes_L3S_L140]:AFTER[Knes] // Ariane L-140 "Drakkar" Stage Fuel Engine
{
	@MODULE[ModuleEnginesFX]
	{
		atmosphereCurve
        {
			key = 0 295
			key = 1 275
			key = 6 0.001
		}
	}
}

@PART[_Knes_L3S_L140]:AFTER[Knes] // Ariane L-140 "Drakkar" Stage Fuel Engine
{	
	@title = L-140 "Drakkar" Liquid Fuel Engine Cluster
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = evenHeavierRocketry
	@entryCost = 27000
	@cost += 2000
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[LiquidFuel]/unitCost$
	@liqCost *= #$RESOURCE[LiquidFuel]/maxAmount$
	%oxiCost = #$@RESOURCE_DEFINITION[Oxidizer]/unitCost$
	@oxiCost *= #$RESOURCE[Oxidizer]/maxAmount$
	@liqCost += #$oxiCost$ // Total Costs of Fuel
	@liqCost *= -1
	
	%addCost = #$cost$
	@addCost += #$liqCost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 839.0 kN ASL / 900.0 kN Vac.\n<b>Isp:</b> 275.0 s ASL / 295.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :140:145:
			@title ^= :Drakkar:Kvalsund:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 1006.8 kN ASL / 1080.0 kN Vac.\n<b>Isp:</b> 302.5 s ASL / 324.5 s Vac.
			upgradeRequired = drakkarUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_L220]:AFTER[Knes] // Ariane L-220 "Valkyrie" Stage
{
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 960
		atmosphereCurve
        {
			key = 0 300
			key = 1 280
			key = 6 0.001
		}
	}
}

@PART[_Knes_L3S_L220]:AFTER[Knes] // Ariane L-220 "Valkyrie" Stage
{	
	@title = L-220 "Valkyrie" Liquid Fuel Engine Cluster
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = evenHeavierRocketry
	@entryCost = 35000
	@cost += 4000
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[LiquidFuel]/unitCost$
	@liqCost *= #$RESOURCE[LiquidFuel]/maxAmount$
	%oxiCost = #$@RESOURCE_DEFINITION[Oxidizer]/unitCost$
	@oxiCost *= #$RESOURCE[Oxidizer]/maxAmount$
	@liqCost += #$oxiCost$ // Total Costs of Fuel
	@liqCost *= -1
	
	%addCost = #$cost$
	@addCost += #$liqCost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 896.0 kN ASL / 960.0 kN Vac.\n<b>Isp:</b> 280.0 s ASL / 300.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :220:229A:
			@title ^= :Valkyrie:Höðr:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 1075.2 kN ASL / 1152.0 kN Vac.\n<b>Isp:</b> 308.0 s ASL / 330.0 s Vac.
			upgradeRequired = knesvalkyrieUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[_Knes_L3S_L220N]:AFTER[Knes] // Ariane L-220N "Ragnarok" Stage
{
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 960
		atmosphereCurve
        {
			key = 0 300
			key = 1 280
			key = 6 0.001
		}
	}
}

@PART[_Knes_L3S_L220N]:AFTER[Knes] // Ariane L-220N "Ragnarok" Stage
{	
	@title = L-220N "Ragnarok" Liquid Fuel Engine Cluster
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = evenHeavierRocketry
	@entryCost = 35000
	@cost += 4000
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	// Long Equations
	%liqCost = #$@RESOURCE_DEFINITION[LiquidFuel]/unitCost$
	@liqCost *= #$RESOURCE[LiquidFuel]/maxAmount$
	%oxiCost = #$@RESOURCE_DEFINITION[Oxidizer]/unitCost$
	@oxiCost *= #$RESOURCE[Oxidizer]/maxAmount$
	@liqCost += #$oxiCost$ // Total Costs of Fuel
	@liqCost *= -1
	
	%addCost = #$cost$
	@addCost += #$liqCost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 896.0 kN ASL / 960.0 kN Vac.\n<b>Isp:</b> 280.0 s ASL / 300.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :220:229A:
			@title ^= :Ragnarok:Nehalennia:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 1075.2 kN ASL / 1152.0 kN Vac.\n<b>Isp:</b> 308.0 s ASL / 330.0 s Vac.
			upgradeRequired = ragnarokUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 7 - veryHeavyRocketry Very Heavy Rocketry
@PART[Knes_Engine_Vulcain]:AFTER[Knes] // Ariane 5 "Vulcain" Liquid Fuel Engine
{	
	@title = AR-75 "Vulcain" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = veryHeavyRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost *= 3
	@cost *= 3
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 894.2 kN ASL / 1390.0 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 342.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :75:75Q:
			@title ^= :Vulcain:Minervain:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 1073.0 kN ASL / 1668.0 kN Vac.\n<b>Isp:</b> 242.0 s ASL / 376.2 s Vac.
			upgradeRequired = vulcainUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

@PART[Knes_Engine_EPS]:AFTER[Knes] // RS-72 "Aestus" Liquid Fuel Engine
{	
	@title = RS-72 "Aestus" Liquid Fuel Engine 
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = veryHeavyRocketry
	
	upgradedThrust0 = #$MODULE[ModuleEngines],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost *= 10
	@cost *= 1.5
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEngines],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEngines],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEngines],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEngines],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEngines],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 62.9 kN ASL / 90.0 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 315.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :72:75:
			@title ^= :Aestus:Quickus:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 75.4 kN ASL / 108.0 kN Vac.\n<b>Isp:</b> 242.0 s ASL / 346.5 s Vac.
			upgradeRequired = aestusUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}

// Tier 8 - experimentalRocketry Experimental Rocketry

// Tier 9 - giganticRocketry

// Tier 10 - colossalRocketry


// ***** Liquid Hydrogen / Liquid Methane ***** \\

// Tier 0 - start, just the small jet engine to allow for the aeronautics branch

// Tier 1 - basicCryoRocketry , a basic 0.625m engine that helps get us off the ground

// Tier 2 - generalCryoRocketry ; Stronger 0.625m engine and initial 1.25m engine

// Tier 3 - advancedCryoRocketry ; Intro of the 1.875m engine in Making History

// Tier 4 - heavyCryoRocketry Heavy Rocketry, Intro of 2.5m engines

// Tier 5 - heavierCryoRocketry Heavier Rocketry

// Tier 6 - evenHeavierCryoRocketry Even Heavier Rocketry Intro of 3.75m engines

// Tier 7 - veryHeavyCryoRocketry Very Heavy Rocketry

// Tier 8 - experimentalCryoRocketry Experimental Rocketry

// Tier 9 - giganticCryoRocketry

// Tier 10 - colossalCryoRocketry


// ***** Speciality Liquid Fuel/Mono Engines ***** \\

// Tier 4 - propulsionSystems
@PART[_Knes_Diamant_Aileron_B]:AFTER[Knes] // KEREB-D "Reactionary" Fin
{	
	@title = KR-AQ2 "Reactionary" Fin
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@TechRequired = propulsionSystems
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	@entryCost *= 2
	@cost *= 2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	//key30 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,3$
	//@key30[1, ] *= 1.1
	//key40 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,4$
	//@key40[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 1.7 kN ASL / 2.0 kN Vac.\n<b>Isp:</b> 220.0 s ASL / 260.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #bfa760
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :AQ2:AQ3:
			@title ^= :Reactionary:Reactionary 2:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 2.0 kN ASL / 2.4 kN Vac.\n<b>Isp:</b> 242.0 s ASL / 286.0 s Vac.
			upgradeRequired = reactionaryUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #bfa760

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}	
}
@PART[_Knes_L3S_H8_Separatron]:AFTER[Knes]
{
	@TechRequired = propulsionSystems
	@MODULE[ModuleEnginesFX]
	{
		@maxThrust = 5.0 // halve the max thrust and add it a bit earlier so we get some variety.
	}
}

// Tier 5 - precisionPropulsion
@PART[_Knes_L3S_L33_Separatron]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
}

@PART[_Knes_Utility_Adapter_09375_0625]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 290
			key = 1 150
			key = 6 0.001
		}
	}
}
@PART[_Knes_Utility_Adapter_09375_0625]:AFTER[Knes]
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	@title ^= :Racoon:Raccoon:
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 14.5 kN ASL / 28.0 kN Vac.\n<b>Isp:</b> 150.0 s ASL / 290.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Raccoon:Beaver:
			@title ^= :07:08:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 17.4 kN ASL / 33.6 kN Vac.\n<b>Isp:</b> 165.0 s ASL / 319.0 s Vac.
			upgradeRequired = raccoonUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}


@PART[Knes_Service_Module_Viking_09375]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 290
			key = 1 150
			key = 6 0.001
		}
	}
	@MODULE[ModuleEnginesRCSFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 260
			key = 1 150
			key = 6 0.001
		}
	}
	@RESOURCE[MonoPropellant]
	{
		@amount = 25
		@maxAmount = 25
	}
}
@PART[Knes_Service_Module_Viking_09375]:AFTER[Knes]
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 12.9 kN ASL / 25.0 kN Vac.\n<b>Isp:</b> 150.0 s ASL / 290.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Viking:Packer:
			@title ^= :09:12:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 15.5 kN ASL / 30.0 kN Vac.\n<b>Isp:</b> 165.0 s ASL / 319.0 s Vac.
			upgradeRequired = vikingSMUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}

@PART[Knes_MonoProp_Engine_srf]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
	@entryCost = 1000
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 290 // 340 seems a bit high
			key = 1 130
			key = 6 0.001
		}
	}
}

@PART[Knes_MonoProp_Engine_srf]:AFTER[Knes]
{
	@title = Mk-11 "Æsir" MonoPropellant Engine
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 3.7 kN ASL / 8.0 kN Vac.\n<b>Isp:</b> 130.0 s ASL / 280.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Æsir:Týr:
			@title ^= :31:31A:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 3.7 kN ASL / 8.0 kN Vac.\n<b>Isp:</b> 143.0 s ASL / 308.0 s Vac.
			upgradeRequired = asirUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}


@PART[_Knes_MonoProp_Engine_1]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 295 // 340 seems a bit high
			key = 1 130
			key = 6 0.001
		}
	}
	@RESOURCE[MonoPropellant]
	{
		@amount = 9
		@maxAmount = 9
	}
}

@PART[_Knes_MonoProp_Engine_1]:AFTER[Knes]
{
	@title ^= :Monoprop:MonoPropellant:
	@title ^= :Themis:Mnemosyne:
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 5.3 kN ASL / 12.0 kN Vac.\n<b>Isp:</b> 130.0 s ASL / 295.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Mnemosyne:Moneta:
			@title ^= :31:31A:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 6.3 kN ASL / 14.4 kN Vac.\n<b>Isp:</b> 143.0 s ASL / 324.5 s Vac.
			upgradeRequired = mnemosyneUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}


@PART[_Knes_MonoProp_Engine_2]:AFTER[Knes]
{
	@TechRequired = precisionPropulsion
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 290 // 340 seems a bit high
			key = 1 130
			key = 6 0.001
		}
	}
	@RESOURCE[MonoPropellant]
	{
		@amount = 9
		@maxAmount = 9
	}
}
@PART[_Knes_MonoProp_Engine_2]:AFTER[Knes]
{
	@title ^= :Monoprop:MonoPropellant:
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 6.7 kN ASL / 15.0 kN Vac.\n<b>Isp:</b> 130.0 s ASL / 290.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Artemis:Diana:
			@title ^= :31:31A:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 8.1 kN ASL / 18.0 kN Vac.\n<b>Isp:</b> 143.0 s ASL / 319.0 s Vac.
			upgradeRequired = knesartemisUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}


// Tier 6 - experimentalPropulsion
@PART[Knes_Hermes_Engine_Mk91]:AFTER[Knes]
{
	@entryCost = 3500
	@cost = 450
	@TechRequired = experimentalPropulsion
	@MODULE[ModuleEnginesFX]
	{
		!atmosphereCurve {}
		atmosphereCurve
		{
			key = 0 295 // 340 seems a bit high
			key = 1 190
			key = 6 0.001
		}
	}
	@RESOURCE[MonoPropellant] // Add a bit more MonoPropellant to help "balance" part given the decrease ISP
	{
		@amount = 15
		@maxAmount = 15
	}
}

@PART[Knes_Hermes_Engine_Mk91]:AFTER[Knes]
{
	@title ^= :Monoprop:MonoPropellant:
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	
	upgradedThrust0 = #$MODULE[ModuleEnginesFX],0/maxThrust$
	@upgradedThrust0 *= 1.2
	
	%addCost = #$cost$
	@addCost *= 0.5
	
	%addMass = #$mass$
	@addMass *= 0.1
	
	// These are technically the same, but want to leave it open to alter in the future
	key00 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,0$
	@key00[1, ] *= 1.1
	key10 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,1$
	@key10[1, ] *= 1.1
	key20 = #$MODULE[ModuleEnginesFX],0/atmosphereCurve/key,2$
	@key20[1, ] *= 1.1
	
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = engineSwitch
		switcherDescriptionPlural = Engine Models
		switcherDescription = Engine Switch

		affectDragCubes = False
		affectFARVoxels = False
		
		SUBTYPE
	    {
			name = original
			title = #$../../title$
			descriptionSummary = Original Model.
			descriptionDetail = <b>Thrust:</b> 51.5 kN ASL / 80.0 kN Vac.\n<b>Isp:</b> 190.0 s ASL / 295.0 s Vac.
			addedCost = 0
			defaultSubtypePriority = 1
			primaryColor = #3cff00
			secondaryColor = #ffffcc
	    }
		
		SUBTYPE
	    {
			name = upgrade
			title = #$../../title$
			@title ^= :Callisto:Actaeon:
			@title ^= :91:92R:
			descriptionSummary = 20% Increased Thrust, 10% Increased Specific Impulse.
			descriptionDetail = <b>Thrust:</b> 61.8 kN ASL / 96.0 kN Vac.\n<b>Isp:</b> 209.0 s ASL / 324.5 s Vac.
			upgradeRequired = callistoUpgrade
			addedCost = #$../../addCost$
			addedMass = #$../../addMass$
			defaultSubtypePriority = 0
			primaryColor = #218e00
			secondaryColor = #ffffcc

			MODULE
			{
			    IDENTIFIER
			    {
					name = ModuleEngines*
			    }

			    DATA
			    {
					maxThrust = #$../../../../upgradedThrust0$
					atmosphereCurve
					{
						key = #$../../../../../key00$
						key = #$../../../../../key10$
						key = #$../../../../../key20$
					}
				}			    
			}
	    }
	}
}

// Tier 7 - exoticPropulsion or ionPropulsion

// Tier 8 - advIonPropulsion or aBitMoreExoticPropulsion

// Tier 9 - plasmaPropulsion or advGriddedThrusters or expAircraftEngines

// Tier 10 - advEMSystems or expGriddedThrusters or hybridAircraftEngines

// Tier 11 - specializedPlasmaGeneration or exoticGriddedThrusters

// Tier 12 - exoticPlasmaPropulsion


// Knes and BetterSRBs pass runs later as Knes has an AFTER[Knes] patch that modifies booster thrust behaviour
// ***** Solid Rocket Boosters ***** \\

// Tier 0 - start
// Good starting solid rocket to get off ground, barely
@PART[_Knes_Booster_P03]:NEEDS[!CNAR]:AFTER[Knes] // KEREB-D "Hector" PO3 Booster
{	
	@title = P-3 "Anubis" Solid Fuel Booster
	@TechRequired = start
}
@PART[_Knes_Booster_P03]:NEEDS[CNAR]:AFTER[Knes] // KEREB-D "Hector" PO3 Booster
{	
	@title = P-3 "Anubis" Solid Fuel Booster
	@TechRequired = soundingRockets
}

@PART[_Knes_Booster_P03]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 230
			key = 1 200
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

@PART[_Knes_Diamant_Booster_P064_0625]:AFTER[Knes] // KEREB-D "Mutineer" Booster
{	
	@title = P-6-4 "Hathor" Solid Fuel Booster
	@TechRequired = start
}

@PART[_Knes_Diamant_Booster_P064_0625]:NEEDS[CNAR]:AFTER[Knes] // KEREB-D "Mutineer" Booster with CNAR
{
	@TechRequired = soundingRockets
}

@PART[_Knes_Diamant_Booster_P064_0625]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 280
			key = 1 220
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}


// Tier 1, soundingRockets - looking at just a slightly more powerful 0.625m part
@PART[_Knes_DiamantBP4_Booster_Rita_09375]:AFTER[Knes] // KEREB-D "Obelix" Booster
{	
	@title = P-1 "Osiris" Solid Fuel Booster
	@TechRequired = soundingRockets
}

@PART[_Knes_DiamantBP4_Booster_Rita_09375]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 280
			key = 1 220
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}




@PART[_Knes_Topaze_Booster_0625]:AFTER[Knes] // KEREB-D "Insurgent" Booster
{	
	@title = P-2 "Thoth" Solid Fuel Booster
	@TechRequired = soundingRockets
}

@PART[_Knes_Topaze_Booster_0625]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 265
			key = 1 240
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

// Tier 2, tinyBoosters - Introduce a 1.25m SRB
@PART[_Knes_Diamant2_Booster_Rita2_9375]:AFTER[Knes] // KEREB-D "Stocky" Booster
{	
	@title = P-5 "Horus" Solid Fuel Booster
	@TechRequired = tinyBoosters
}

@PART[_Knes_Diamant2_Booster_Rita2_9375]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 265
			key = 1 240
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}


@PART[_Knes_Diamant2_Booster_P10_9375]:AFTER[Knes] // KEREB-D "Dumby" Booster
{	
	@title = P-10 "Re" Solid Fuel Booster
	@TechRequired = tinyBoosters
}

@PART[_Knes_Diamant2_Booster_P10_9375]:NEEDS[BetterSRBs]:AFTER[Knes]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 265
			key = 1 240
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

@PART[_Knes_L3S_PAP]:AFTER[Knes] // KEREB-D "Pollux" PAP Booster
{	
	@title = P-13 "Menhit" Solid Fuel Booster
	@TechRequired = tinyBoosters
}

@PART[_Knes_L3S_PAP]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 265
			key = 1 240
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

// Tier 3, smallBoosters - Some more powerful 1.25m SRB
@PART[_Knes_Diamant2_Booster_P16_9375]:AFTER[Knes] // KEREB-D "Chunky" Booster
{	
	@title = P-16 "Ptah" Solid Fuel Booster
	@TechRequired = smallBoosters
}

@PART[_Knes_Diamant2_Booster_P16_9375]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	@description ^= :105% to 50% regressive thrust curve: :
	@description ^= :105% to 66% regressive thrust curve: :
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 265
			key = 1 240
			key = 10.6 0.001
		}
		useThrustCurve = true
		!thrustCurve {} // Get rid of the existing
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

@PART[Knes_Booster_P35]:AFTER[Knes] // P35
{	
	@title = P-35 "Amon" Solid Fuel Booster 
	@TechRequired = smallBoosters
}

@PART[Knes_Booster_P35]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

@PART[_Knes_L3S_P40]:AFTER[Knes] // P40
{	
	@title = P-40 "Sopdu" Solid Fuel Booster 
	@TechRequired = smallBoosters
}

@PART[_Knes_L3S_P40]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}



// Tier 4, mediumBoosters - Intro of a solid 1.875 m booster found within Missing History Patch

@PART[Knes_Booster_P80]:AFTER[Knes] // P80
{	
	@title = P-80 "Bastet" Solid Fuel Booster 
	@TechRequired = mediumBoosters
	@entryCost = 7500
}

@PART[Knes_Booster_P80]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

// Tier 5, largeBoosters - 2.5m booster


// Tier 6, largerBoosters - Pollux from Making History makes this branch
@PART[Knes_Booster_EAP]:AFTER[Knes] // Ariane 5 "EAP" Solid Fuel Booster // Scale comparison with the Ram suggests it should have 50% more solid fuel
{	
	@title = P-90 "EAP" Solid Fuel Booster 
	@TechRequired = largeBoosters
	@RESOURCE[SolidFuel]
	{
		@amount = 6800
		@maxAmount = 6800
	}
	@cost = 6000
	@entryCost = 15000
}

@PART[Knes_Booster_EAP]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		@maxThrust = 2700
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

// Tier 7 - hugeBoosters
@PART[_Knes_L3S_P120C]:AFTER[Knes] // P80
{	
	@title = P-120C "Sekhmet" Solid Fuel Booster 
	@TechRequired = hugeBoosters
}

@PART[_Knes_L3S_P120C]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

@PART[_Knes_L3S_P120E]:AFTER[Knes] // P80
{	
	@title = P-120E "Ra" Solid Fuel Booster 
	@TechRequired = hugeBoosters
}

@PART[_Knes_L3S_P120E]:NEEDS[BetterSRBs,Knes]:FOR[zKiwiTechTree]
{	
	BetterSRBsTag = True
	@MODULE[ModuleEngines*]
	{
		maxThrust01 = #$maxThrust$
		@maxThrust01 *= 0.8 
		maxThrust02 = #$maxThrust$
		@maxThrust02 *= 1.2 
		!atmosphereCurve{}
		atmosphereCurve
		{
			key = 0 258
			key = 1 235
			key = 10.6 0.001
		}
		useThrustCurve = true
		thrustCurve
		{
			key = 0 0.1 0 35
			key = 0.03 0.801 0.76 0.76
			key = 0.61 1.2418 0.76 -0.62
			key = 1 1 -0.62 0
		}
	}
	MODULE
	{
		name = ModuleTweakMaxResource
		resourceName = SolidFuel
	}
}

// Tier 8 - gargantuanBoosters


// ***** Thermals ***** \\

// Tier 0 - start

// Tier 1 - engineering101

// Tier 2 - science201

// Tier 3 - batteryTech
@PART[Knes_Heatshield_09375]:AFTER[Knes]
{	
	@TechRequired = batteryTech
}

// Tier 4 - electrics

// Tier 5 - heatManagementSystems
@PART[_Knes_mrk_HeatSheild]:AFTER[Knes]
{	
	@TechRequired = heatManagementSystems
}

// Tier 6 - intermediateHeatManagement

// Tier 7 - advHeatManagement

// Tier 8 - experimentalHeatManagement

// Tier 9 - specializedRadiators
