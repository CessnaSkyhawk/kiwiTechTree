// Kiwi's Tech Tree Overhaul (Near Future Lauch Vehicles 2.03 by Nertea Upgrade Patch)
// Version 1.2
// Created: 24 August 2020 for KSP 1.9.1 to 1.10.1
// Last Updated: 23 November 2020
// 25 September 2020: Added NEEDS to PARTUPGRADE 
// 10 November 2020: Standardized Upgrades
// 11 November 2020: Upgrade Cleanup
// 23 November 2020: Added support to disable engine and structural upgrades

@PART[nflv-cargo-tube-5-1]:HAS[,~structuralUpgrade[off]]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This structural part has upgrades in $@PARTUPGRADE[structural_7_8_Upgrade]/techRequired$!</color> 
	@MODULE[ModuleB9PartSwitch],0
	{
		SUBTYPE
		{
		  name = ShortComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_short
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 5mCargoTubeShort
		  addedMass = -0.1984
		  addedCost = 1046
		  NODE
		  {
			 name = top
			position =  0, 0.379, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 0.279, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -0.379, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -0.279, 0
		  }


		}
		SUBTYPE
		{
		  name = Med-ShortComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_medshort
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 5mCargoTubeMedShort
		  addedMass = .2016
		  addedCost = 2546
		  NODE
		  {
			 name = top
			position =  0, 0.897, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0,0.797, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -0.897, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -0.797, 0
		  }
		}
		SUBTYPE
		{
		  name = MedComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_med
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 5mCargoTubeMed
		  addedMass = 0.6016
		  addedCost = 4046
		  NODE
		  {
			 name = top
			position =  0, 1.672, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 1.572, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -1.672, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -1.572, 0
		  }
		}
		SUBTYPE
		{
		  name = Med-LongComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_medlong
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 5mCargoTubeMedLong
		  addedMass = 1.4016
		  addedCost = 5546
		  NODE
		  {
			 name = top
			position =  0, 2.45, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 2.35, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -2.45, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -2.35, 0
		  }
		}
		SUBTYPE
		{
		  name = LongComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_long
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 5mCargoTubeLong
		  addedMass = 2.2016
		  addedCost = 7046
		  NODE
		  {
			 name = top
			position =  0, 3.226, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 3.126, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -3.226, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -3.126, 0
		  }
		}
	}
}

@PART[nflv-cargo-tube-75-1]:HAS[,~structuralUpgrade[off]]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This part has upgrades!</color> 
	//cost = 3000
	//mass = 1.5
	@MODULE[ModuleB9PartSwitch],0
	{
		SUBTYPE
		{
		  name = ShortComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_short
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 75mCargoTubeShort
		  addedMass = -0.3
		  addedCost = 1500
		  NODE
		  {
			 name = top
			position =  0, 0.902, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 0.8, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -0.899, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -0.799, 0
		  }


		}
		SUBTYPE
		{
		  name = Med-ShortComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_medshort
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 75mCargoTubeMedShort
		  addedMass = .3
		  addedCost = 3750
		  NODE
		  {
			 name = top
			position =  0, 1.678, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 1.578, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -1.681, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -1.581, 0
		  }
		}
		SUBTYPE
		{
		  name = MedComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_med
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 75mCargoTubeMed
		  addedMass = 0.9
		  addedCost = 6000
		  NODE
		  {
			 name = top
			position =  0, 2.466, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 2.366, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -2.4486, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -2.348, 0
		  }
		}
		SUBTYPE
		{
		  name = Med-LongComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_medlong
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 75mCargoTubeMedLong
		  addedMass = 2.1
		  addedCost = 8250
		  NODE
		  {
			 name = top
			position =  0, 3.226, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 3.126, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -3.249, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -3.149, 0
		  }
		}
		SUBTYPE
		{
		  name = LongComposite
		  title = #LOC_NFLaunchVehicles_switcher_shroud_size_long
		  @title = #$title$ (Composite)
		  descriptionSummary = 20% reduction in dry mass
		  upgradeRequired = structural_7_8_Upgrade
		  transform = 75mCargoTubeLong
		  addedMass = 3.3
		  addedCost = 10500
		  NODE
		  {
			 name = top
			position =  0, 4.007, 0
		  }
		  NODE
		  {
			 name = top2
			position =  0, 3.9, 0
		  }
		  NODE
		  {
			 name = bottom
			position =  0, -4.005, 0
		  }
		  NODE
		  {
			 name = bottom2
			position =  0, -3.9, 0
		  }
		}
	}
}


// Tier 1 - basicRocketry

// Tier 2 - generalRocketry ; Stronger 0.625m engine and initial 1.25m engine

// Tier 3 - advRocketry ; Intro of the 1.875m engine in Making History
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = goldfishUpgrade
	partIcon = nflv-engine-rutherford-1
	techRequired = advRocketry
	entryCost = 3300
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-1E "Goldfish" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Goldfish thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[goldfishUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-rutherford-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-rutherford-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-rutherford-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-rutherford-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[goldfishUpgrade]/techRequired$!</color> 
}


// Tier 4 - heavyRocketry Heavy Rocketry, Intro of 2.5m engines
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = angoraUpgrade
	partIcon = nflv-engine-rutherford-vac-1
	techRequired = heavyRocketry
	entryCost = 5250
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-1E-V "Angora" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Angora thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[angoraUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-rutherford-vac-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-rutherford-vac-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-rutherford-vac-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-rutherford-vac-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[angoraUpgrade]/techRequired$!</color> 
}

// Tier 5 - heavierRocketry Heavier Rocketry
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = otterUpgrade
	partIcon = nflv-engine-m1d-1
	techRequired = heavierRocketry
	entryCost = 15000
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-1M "Otter" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Otter thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[otterUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-m1d-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-m1d-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-m1d-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-m1d-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[otterUpgrade]/techRequired$!</color> 
}

// Tier 6 - evenHeavierRocketry Even Heavier Rocketry Intro of 3.75m engines
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = sphinxUpgrade
	partIcon = nflv-engine-m1d-vac-1
	techRequired = evenHeavierRocketry
	entryCost = 15000
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KR-1M-V "Spinx" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Sphinx thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[sphinxUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-m1d-vac-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-m1d-vac-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-m1d-vac-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-m1d-vac-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[sphinxUpgrade]/techRequired$!</color> 
}

// Tier 7 - veryHeavyRocketry Very Heavy Rocketry
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = walrusUpgrade
	partIcon = nflv-engine-ar1-1
	techRequired = veryHeavyRocketry
	entryCost = 52500
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-10AJ "Walrus" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Walrus thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[walrusUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-ar1-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-ar1-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-ar1-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-ar1-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[walrusUpgrade]/techRequired$!</color> 
}


// Tier 8 - experimentalRocketry Experimental Rocketry
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = lynxUpgrade
	partIcon = nflv-engine-rd704-1
	techRequired = experimentalRocketry
	entryCost = 63150
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KR-74 "Lynx" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Lynx thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[lynxUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-rd704-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-rd704-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-rd704-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-rd704-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[lynxUpgrade]/techRequired$!</color> 
}

// Tier 9 - giganticRocketry
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = ocelotUpgrade
	partIcon = nflv-engine-rs84-1
	techRequired = giganticRocketry
	entryCost = 75000
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KR-84 "Ocelot" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Ocelot thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[ocelotUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-rs84-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-rs84-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-rs84-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-rs84-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[ocelotUpgrade]/techRequired$!</color> 
}

PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = orcaUpgrade
	partIcon = nflv-engine-stbe-kero-1
	techRequired = giganticRocketry
	entryCost = 112500
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-160 "Orca" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Orca thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[orcaUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-stbe-kero-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-stbe-kero-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-stbe-kero-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-stbe-kero-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[orcaUpgrade]/techRequired$!</color> 
}

PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = porpoiseUpgrade
	partIcon = nflv-engine-tr107-1
	techRequired = giganticRocketry
	entryCost = 112500
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-107 "Porpoise" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Porpoise thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[porpoiseUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-tr107-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-tr107-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-tr107-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-tr107-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[porpoiseUpgrade]/techRequired$!</color> 
}

// Tier 10 - colossalRocketry
PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = manateeUpgrade
	partIcon = nflv-engine-ar1c-1
	techRequired = colossalRocketry
	entryCost = 127500
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KS-600AJ "Manatee" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Manatee thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[manateeUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-ar1c-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-ar1c-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-ar1c-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-ar1c-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[manateeUpgrade]/techRequired$!</color> 
}

PARTUPGRADE:NEEDS[NearFutureLaunchVehicles]
{
	type = engine
	name = cougarUpgrade
	partIcon = nflv-engine-rd701-1
	techRequired = colossalRocketry
	entryCost = 133500
	cost = 0 // for display only; all parts implementing this will need a PartStatsUpgradeModule with cost = this.
	title = KR-701 "Cougar" Liquid Fuel Engine Upgrade
	basicInfo = Increased Thrust, Increased Specific Impulse.
	manufacturer = Kiwi Imagineers
	description = Our imagineers dreamt about making the Cougar thrustier and efficientier and have "made it so".
}
@PARTUPGRADE[cougarUpgrade]:NEEDS[NearFutureLaunchVehicles]:FOR[zKiwiTechTree]
{
	@entryCost = #$@PART[nflv-engine-rd701-1]/entryCost$
	@entryCost *= #$@KIWI_ENGINE_MULTIPLIERS/KEROLOX/UPGRADE_ENTRYCOST_MULTIPLIER$
	@title = #$@PART[nflv-engine-rd701-1]/title$ Upgrade
	@description = #Our imagineers dreamt about making the $@PART[nflv-engine-rd701-1]/engineName$ thrustier and efficientier and have "made it so".
}
@PART[nflv-engine-rd701-1]:NEEDS[NearFutureLaunchVehicles]:HAS[~engineUpgrade[off]]:AFTER[zzKiwiTechTree]
{
	@description = #$description$ \n\n<color=#ff0000>This engine has an upgrade in $@PARTUPGRADE[cougarUpgrade]/techRequired$!</color> 
}